(this.webpackJsonpreact=this.webpackJsonpreact||[]).push([[0],{208:function(e,t,n){},212:function(e,t,n){"use strict";n.r(t);var a=n(0),c=n(72),r=n.n(c),o=n(2),l=n(6),s=n(18),i=n.n(s),u=n(42),d=n(1);function b(e){var t=e.data,n=e.columns;n[0].header="Sub Population Name",n[1].header="Net Impact",n[2].header="Baseline Subpopulation Size",n[3].header="RCA Subpopulation Size",n[6].header="Baseline Metric",n[7].header="RCA Metric";var a=[n[0],n[6],n[7],n[2],n[3],n[1],n[4],n[5]];console.log(a,"oc");var c=Object(u.useTable)({columns:a,data:t,initialState:{pageIndex:0,hiddenColumns:["avg_duration_val_g1","avg_duration_val_g2","ItemTotalPrice_val_g1","ItemTotalPrice_val_g2"]}},u.usePagination),r=c.getTableProps,l=c.getTableBodyProps,s=c.headerGroups,i=c.prepareRow,b=c.page,j=c.canPreviousPage,g=c.canNextPage,h=c.pageOptions,p=c.pageCount,f=c.gotoPage,O=c.nextPage,m=c.previousPage,x=c.setPageSize,v=c.state,k=v.pageIndex,C=v.pageSize;return Object(d.jsxs)("div",{className:"paginatedTable",children:[Object(d.jsx)("br",{}),Object(d.jsxs)("div",{className:"pagination",children:[Object(d.jsx)("button",{onClick:function(){return f(0)},disabled:!j,children:"<<"})," ",Object(d.jsx)("button",{onClick:function(){return m()},disabled:!j,children:"<"})," ",Object(d.jsx)("button",{onClick:function(){return O()},disabled:!g,children:">"})," ",Object(d.jsx)("button",{onClick:function(){return f(p-1)},disabled:!g,children:">>"})," ",Object(d.jsxs)("span",{children:["Page"," ",Object(d.jsxs)("strong",{children:[k+1," of ",h.length]})," "]}),Object(d.jsxs)("span",{children:["| Go to page:"," ",Object(d.jsx)("input",{type:"number",defaultValue:k+1,onChange:function(e){var t=e.target.value?Number(e.target.value)-1:0;f(t)},style:{width:"100px"}})]})," ",Object(d.jsx)("select",{value:C,onChange:function(e){x(Number(e.target.value))},children:[10,20,30,40,50].map((function(e){return Object(d.jsxs)("option",{value:e,children:["Show ",e]},e)}))})]}),Object(d.jsx)("br",{}),Object(d.jsxs)("table",Object(o.a)(Object(o.a)({},r()),{},{children:[Object(d.jsx)("thead",{children:s.map((function(e){return Object(d.jsx)("tr",Object(o.a)(Object(o.a)({},e.getHeaderGroupProps()),{},{children:e.headers.map((function(e){return Object(d.jsx)("th",Object(o.a)(Object(o.a)({},e.getHeaderProps()),{},{style:{borderBottom:"solid 3px red",background:"aliceblue",color:"black",fontSize:"11px"},children:Object(d.jsx)("p",{children:e.header})}))}))}))}))}),Object(d.jsx)("tbody",Object(o.a)(Object(o.a)({},l()),{},{children:b.map((function(e,t){return i(e),Object(d.jsx)("tr",Object(o.a)(Object(o.a)({},e.getRowProps()),{},{children:e.cells.map((function(e){return Object(d.jsx)("td",Object(o.a)(Object(o.a)({},e.getCellProps()),{},{style:{color:"Net Impact"==e.column.header?e.value<0?"#E74C3C":"#27AE60":"black",borderBottom:"1px solid black",fontSize:"11px"},children:e.render("Cell")}))}))}))}))}))]}))]})}var j=n(75);function g(e){var t=e.data;e.api;return Object(d.jsx)(j.a,{data:t,options:{responsive:!0,maintainAspectRatio:!0,backgroundColor:"rgb(255,0,0,0)",legend:{display:!0},scales:{xAxes:[{ticks:{display:!1,callback:function(e){return e.substr(0,3)}}}]}}})}n(208);var h=n(11);n(211);function p(){var e=Object(a.useState)(null),t=Object(l.a)(e,2),n=t[0],c=t[1],r=Object(a.useState)([]),s=Object(l.a)(r,2),u=s[0],j=s[1],p=Object(a.useState)(null),f=Object(l.a)(p,2),O=f[0],m=f[1],x=Object(a.useState)("banking"),v=Object(l.a)(x,2),k=v[0],C=v[1],P=Object(a.useState)({}),S=Object(l.a)(P,2),E=(S[0],S[1]),_=Object(a.useState)([]),I=Object(l.a)(_,2),N=I[0],y=I[1],A=Object(a.useState)(0),T=Object(l.a)(A,2),B=T[0],w=T[1];function z(e){var t=[];if(e){console.log("setting up table"),Object.keys(e[0]).forEach((function(e){t.push({header:e,accessor:e})})),j(t);var n=e.map((function(e){return"banking"==k?[e.string,e.avg_duration_impact]:[e.string,e.ItemTotalPrice_impact]})).sort().slice(0,10),a={labels:[],datasets:[{label:"banking"==k?"Top 10 Avg Duration Impact":"Top 10 Total Price Impact",data:[],backgroundColor:[],borderWidth:1}]};n.length&&n.forEach((function(e){console.log("\ud83d\ude80 ~ file: App.js ~ line 151 ~ topImpact.forEach ~ item",e),a.labels.push(e[0]),a.datasets[0].data.push(e[1]),a.datasets[0].backgroundColor.push(e[e.length-1]<0?"#E74C3C":"#27AE60")})),m(a)}}function R(e){var t=["All"],n={};if(e){if("banking"==k){console.log("processing banking");for(var a=0;a<e.length;a++)for(var c=e[a].string.split(/[=&]+/),r=0;r<c.length;r++)r%2===0&&(t.includes(c[r].trim())||t.push(c[r].trim()));t.forEach((function(e){return n[e]=[]}));for(var o=0;o<e.length;o++)for(var l=e[o].string.split(/[=&]+/),s=0;s<l.length;s++)if(t.includes(l[s].trim())){var i=l[s].trim();n[i].includes(l[s+1].trim())||n[i].push(l[s+1].trim())}console.log("set bank",N)}else{console.log("processing ecommerce");for(var u=0;u<e.length;u++)for(var d=e[u].string.split(/[&]+/),b=0;b<d.length;b++)if(d[b].includes("<")){d=d[b].split("<");for(var j=0;j<d.length;j++)if(1==j){var g=d[j].trim();t.includes(g)||t.push(g)}}else if((d=d[b].split("=")).length>1)for(var h=0;h<d.length;h++)0!=h||t.includes(d[h].trim())||t.push(d[h].trim());t.forEach((function(e){return n[e]=[]}));for(var p=0;p<e.length;p++)for(var f=e[p].string.split(/[&]+/),O=0;O<f.length;O++)if(f[O].includes("<")){f=f[O].split("<");for(var m=0;m<f.length;m++)if(1==m){var x=f[m].trim();n[x].push({min:f[m-1].trim(),max:f[m+1].replace("=","").trim()})}}else if((f=f[O].split("=")).length>1)for(var v=0;v<f.length;v++)if(0==v){var C=f[v].trim(),P=f[v+1].trim();n[C].includes(P)||n[C].push(P)}console.log("set ecomm",N)}console.log("setting ids dims",t,n),y(t),E(n)}}Object(a.useEffect)((function(){console.clear(),i.a.get("banking"===k?"http://localhost:1234/bank":"http://localhost:1234/ecom").then((function(e){console.log(e.data),e.data&&(c(e.data),console.log("got data"),R(e.data),z(e.data))})).catch((function(e){return console.log(e)}))}),[]),Object(a.useEffect)((function(){w(0),console.clear(),i.a.get("banking"===k?"http://localhost:1234/bank":"http://localhost:1234/ecom").then((function(e){console.log(e.data),e.data&&(c(e.data),console.log("got data"),R(e.data),z(e.data))})).catch((function(e){return console.log(e)}))}),[k]),Object(a.useEffect)((function(){if(0==B)i.a.get("banking"===k?"http://localhost:1234/bank":"http://localhost:1234/ecom").then((function(e){console.log(e.data),e.data&&(c(e.data),console.log("got data"),R(e.data),z(e.data))})).catch((function(e){return console.log(e)}));else{console.log(n),n.length||(console.log("fetching data again"),i.a.get("banking"===k?"http://localhost:1234/bank":"http://localhost:1234/ecom").then((function(e){if(e.data){var t=e.data.filter((function(e){return e.string.includes(N[B])}));c(t),R(e.data),z(e.data)}})));var e=n.filter((function(e){return e.string.includes(N[B])}));c(e)}}),[B]);var G=function(){return N&&Object(d.jsxs)(d.Fragment,{children:[Object(d.jsx)("br",{}),Object(d.jsxs)(h.d,{selectedIndex:B,onSelect:function(e){return w(e)},children:[Object(d.jsxs)(h.b,{children:[N.map((function(e){return Object(d.jsx)(h.a,{children:e},e)})),Object(d.jsx)(h.a,{children:"Chart"})]}),N.map((function(e){return Object(d.jsx)(h.c,{children:Object(d.jsx)(b,{data:n,columns:u})},e)})),Object(d.jsx)(h.c,{children:Object(d.jsxs)("div",{className:"chart",children:[Object(d.jsx)(g,Object(o.a)({data:O},k)),Object(d.jsx)("br",{})]})})]})]})};return u.length?Object(d.jsxs)(d.Fragment,{children:[Object(d.jsxs)("div",{className:"selectApi",children:[Object(d.jsx)("button",{onClick:function(){return C("banking")},children:"Bank-Marketing"})," ","\xa0",Object(d.jsx)("button",{onClick:function(){return C("ecommerce")},children:"E-Commerce"}),Object(d.jsx)("br",{})]}),Object(d.jsx)("div",{className:"container",children:Object(d.jsx)("div",{className:"table",children:N.length?Object(d.jsx)(G,{}):Object(d.jsx)("p",{children:"Processing..."})})})]}):"loading..."}r.a.render(Object(d.jsx)(p,{}),document.getElementById("root"))}},[[212,1,2]]]);
//# sourceMappingURL=main.f301d8a3.chunk.js.map