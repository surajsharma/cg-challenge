(this.webpackJsonpreact=this.webpackJsonpreact||[]).push([[0],{208:function(e,t,n){},212:function(e,t,n){"use strict";n.r(t);var a=n(0),c=n(72),r=n.n(c),o=n(2),i=n(6),s=n(18),l=n.n(s),u=n(42),d=n(1);function b(e){var t=e.data,n=e.columns,a=Object(u.useTable)({columns:n,data:t,initialState:{pageIndex:0,hiddenColumns:["avg_duration_val_g1","avg_duration_val_g2","ItemTotalPrice_val_g1","ItemTotalPrice_val_g2"]}},u.usePagination),c=a.getTableProps,r=a.getTableBodyProps,i=a.headerGroups,s=a.prepareRow,l=a.page,b=a.canPreviousPage,j=a.canNextPage,g=a.pageOptions,h=a.pageCount,f=a.gotoPage,p=a.nextPage,O=a.previousPage,m=a.setPageSize,x=a.state,v=x.pageIndex,k=x.pageSize;return Object(d.jsxs)("div",{className:"paginatedTable",children:[Object(d.jsx)("br",{}),Object(d.jsxs)("div",{className:"pagination",children:[Object(d.jsx)("button",{onClick:function(){return f(0)},disabled:!b,children:"<<"})," ",Object(d.jsx)("button",{onClick:function(){return O()},disabled:!b,children:"<"})," ",Object(d.jsx)("button",{onClick:function(){return p()},disabled:!j,children:">"})," ",Object(d.jsx)("button",{onClick:function(){return f(h-1)},disabled:!j,children:">>"})," ",Object(d.jsxs)("span",{children:["Page"," ",Object(d.jsxs)("strong",{children:[v+1," of ",g.length]})," "]}),Object(d.jsxs)("span",{children:["| Go to page:"," ",Object(d.jsx)("input",{type:"number",defaultValue:v+1,onChange:function(e){var t=e.target.value?Number(e.target.value)-1:0;f(t)},style:{width:"100px"}})]})," ",Object(d.jsx)("select",{value:k,onChange:function(e){m(Number(e.target.value))},children:[10,20,30,40,50].map((function(e){return Object(d.jsxs)("option",{value:e,children:["Show ",e]},e)}))})]}),Object(d.jsx)("br",{}),Object(d.jsxs)("table",Object(o.a)(Object(o.a)({},c()),{},{children:[Object(d.jsx)("thead",{children:i.map((function(e){return Object(d.jsx)("tr",Object(o.a)(Object(o.a)({},e.getHeaderGroupProps()),{},{children:e.headers.map((function(e){return Object(d.jsx)("th",Object(o.a)(Object(o.a)({},e.getHeaderProps()),{},{style:{borderBottom:"solid 3px red",background:"aliceblue",color:"black",fontSize:"13px"},children:Object(d.jsx)("p",{children:e.header})}))}))}))}))}),Object(d.jsx)("tbody",Object(o.a)(Object(o.a)({},r()),{},{children:l.map((function(e,t){return s(e),Object(d.jsx)("tr",Object(o.a)(Object(o.a)({},e.getRowProps()),{},{children:e.cells.map((function(e){return Object(d.jsx)("td",Object(o.a)(Object(o.a)({},e.getCellProps()),{},{style:{color:"Net Impact"==e.column.header?e.value<0?"#E74C3C":"#27AE60":"black",borderBottom:"1px solid black",fontSize:"13px",fontWeight:"bolder"},children:e.render("Cell")}))}))}))}))}))]}))]})}var j=n(75);function g(e){var t=e.data;e.api;return Object(d.jsx)(j.a,{data:t,options:{responsive:!0,maintainAspectRatio:!0,backgroundColor:"rgb(255,0,0,0)",legend:{display:!0},scales:{xAxes:[{ticks:{display:!1,callback:function(e){return e.substr(0,3)}}}]}}})}n(208);var h=n(11);n(211);function f(){var e=Object(a.useState)(null),t=Object(i.a)(e,2),n=t[0],c=t[1],r=Object(a.useState)([]),s=Object(i.a)(r,2),u=s[0],j=s[1],f=Object(a.useState)(null),p=Object(i.a)(f,2),O=p[0],m=p[1],x=Object(a.useState)("banking"),v=Object(i.a)(x,2),k=v[0],C=v[1],P=Object(a.useState)({}),S=Object(i.a)(P,2),E=(S[0],S[1]),_=Object(a.useState)([]),I=Object(i.a)(_,2),N=I[0],y=I[1],A=Object(a.useState)(0),T=Object(i.a)(A,2),B=T[0],w=T[1],z="https://mocki.io/v1/c99c382d-9952-4452-a860-02f0e7f01449",R="https://mocki.io/v1/f8e89695-6f41-4e1c-b5e4-bfd9d7ddffa4";function G(e){var t=[];if(e){console.log("setting up table"),Object.keys(e[0]).forEach((function(e){t.push({header:e,accessor:e})})),t[0].header="Sub Population Name",t[1].header="Net Impact",t[2].header="Baseline Subpopulation Size",t[3].header="RCA Subpopulation Size",t[6].header="Baseline Metric",t[7].header="RCA Metric";var n=[t[0],t[6],t[7],t[2],t[3],t[1],t[4],t[5]];j(n);var a=e.map((function(e){return"banking"==k?[e.string,e.avg_duration_impact]:[e.string,e.ItemTotalPrice_impact]})).sort().slice(0,10),c={labels:[],datasets:[{label:"banking"==k?"Top 10 Avg Duration Impact":"Top 10 Total Price Impact",data:[],backgroundColor:[],borderWidth:1}]};a.length&&a.forEach((function(e){console.log("\ud83d\ude80 ~ file: App.js ~ line 151 ~ topImpact.forEach ~ item",e),c.labels.push(e[0]),c.datasets[0].data.push(e[1]),c.datasets[0].backgroundColor.push(e[e.length-1]<0?"#E74C3C":"#27AE60")})),m(c)}}function M(e){var t=["All"],n={};if(e){if("banking"==k){console.log("processing banking");for(var a=0;a<e.length;a++)for(var c=e[a].string.split(/[=&]+/),r=0;r<c.length;r++)r%2===0&&(t.includes(c[r].trim())||t.push(c[r].trim()));t.forEach((function(e){return n[e]=[]}));for(var o=0;o<e.length;o++)for(var i=e[o].string.split(/[=&]+/),s=0;s<i.length;s++)if(t.includes(i[s].trim())){var l=i[s].trim();n[l].includes(i[s+1].trim())||n[l].push(i[s+1].trim())}console.log("set bank",N)}else{console.log("processing ecommerce");for(var u=0;u<e.length;u++)for(var d=e[u].string.split(/[&]+/),b=0;b<d.length;b++)if(d[b].includes("<")){d=d[b].split("<");for(var j=0;j<d.length;j++)if(1==j){var g=d[j].trim();t.includes(g)||t.push(g)}}else if((d=d[b].split("=")).length>1)for(var h=0;h<d.length;h++)0!=h||t.includes(d[h].trim())||t.push(d[h].trim());t.forEach((function(e){return n[e]=[]}));for(var f=0;f<e.length;f++)for(var p=e[f].string.split(/[&]+/),O=0;O<p.length;O++)if(p[O].includes("<")){p=p[O].split("<");for(var m=0;m<p.length;m++)if(1==m){var x=p[m].trim();n[x].push({min:p[m-1].trim(),max:p[m+1].replace("=","").trim()})}}else if((p=p[O].split("=")).length>1)for(var v=0;v<p.length;v++)if(0==v){var C=p[v].trim(),P=p[v+1].trim();n[C].includes(P)||n[C].push(P)}console.log("set ecomm",N)}console.log("setting ids dims",t,n),y(t),E(n)}}Object(a.useEffect)((function(){console.clear(),l.a.get("banking"===k?z:R).then((function(e){console.log(e.data),e.data&&(c(e.data),console.log("got data"),M(e.data),G(e.data))})).catch((function(e){return console.log(e)}))}),[]),Object(a.useEffect)((function(){w(0),console.clear(),l.a.get("banking"===k?z:R).then((function(e){console.log(e.data),e.data&&(c(e.data),console.log("got data"),M(e.data),G(e.data))})).catch((function(e){return console.log(e)}))}),[k]),Object(a.useEffect)((function(){if(0==B)l.a.get("banking"===k?z:R).then((function(e){console.log(e.data),e.data&&(c(e.data),console.log("got data"),M(e.data),G(e.data))})).catch((function(e){return console.log(e)}));else{console.log(n),n.length||(console.log("fetching data again"),l.a.get("banking"===k?z:R).then((function(e){if(e.data){var t=e.data.filter((function(e){return e.string.includes(N[B])}));c(t),M(e.data),G(e.data)}})));var e=n.filter((function(e){return e.string.includes(N[B])}));c(e)}}),[B]);var F=function(){return N&&Object(d.jsxs)(d.Fragment,{children:[Object(d.jsx)("br",{}),Object(d.jsxs)(h.d,{selectedIndex:B,onSelect:function(e){return w(e)},children:[Object(d.jsxs)(h.b,{children:[N.map((function(e){return Object(d.jsx)(h.a,{children:e},e)})),Object(d.jsx)(h.a,{children:"Chart"})]}),N.map((function(e){return Object(d.jsx)(h.c,{children:Object(d.jsx)(b,{data:n,columns:u})},e)})),Object(d.jsx)(h.c,{children:Object(d.jsxs)("div",{className:"chart",children:[Object(d.jsx)(g,Object(o.a)({data:O},k)),Object(d.jsx)("br",{})]})})]})]})};return u.length?Object(d.jsxs)(d.Fragment,{children:[Object(d.jsxs)("div",{className:"selectApi",children:[Object(d.jsx)("button",{onClick:function(){return C("banking")},children:"Bank-Marketing"})," ","\xa0",Object(d.jsx)("button",{onClick:function(){return C("ecommerce")},children:"E-Commerce"}),Object(d.jsx)("br",{})]}),Object(d.jsx)("div",{className:"container",children:Object(d.jsx)("div",{className:"table",children:N.length?Object(d.jsx)(F,{}):Object(d.jsx)("p",{children:"Processing..."})})})]}):"loading..."}r.a.render(Object(d.jsx)(f,{}),document.getElementById("root"))}},[[212,1,2]]]);
//# sourceMappingURL=main.ec2cef2e.chunk.js.map